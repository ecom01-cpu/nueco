{% comment %}
  Renders a promotional card with image/video and text overlay
  
  Accepts:
  - block: {Object} Block object with settings
  - class: {String} Additional CSS classes (optional)
  - lazy_load: {Boolean} Whether to lazy load the image. Default: true (optional)
  
  Usage:
  {% render 'promo-card', block: block %}
{% endcomment %}

<style>
  .promo-card {
    position: relative;
    overflow: hidden;
    border-radius: 8px;
    height: 100%;
  }

  .promo-card-wrapper {
    padding-top: {{ block.settings.padding_top_mobile | default: 0 }}px;
    padding-bottom: {{ block.settings.padding_bottom_mobile | default: 0 }}px;
  }

  @media screen and (min-width: 750px) {
    .promo-card-wrapper {
      padding-top: {{ block.settings.padding_top | default: 0 }}px;
      padding-bottom: {{ block.settings.padding_bottom | default: 0 }}px;
      height: 100%
    }
  }

  .promo-card__image {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .promo-card__image--desktop {
    display: block;
  }

  .promo-card__image--mobile {
    display: none;
  }

  .promo-card__placeholder {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: #f0f0f0;
  }

  .promo-card__overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, var(--overlay-opacity, 0.3));
    z-index: 1;
    display: block !important;
  }

  .promo-card__content {
    position: absolute;
    padding: 55px;
    z-index: 2;
    display: flex;
    flex-direction: column;
    justify-content: flex-end;
    bottom: 0;
    left: 0;
    right: 0;
    text-align: center;
  }

  /* Position modifiers */
  .promo-card__content--top-left {
    top: 0;
    bottom: auto;
    left: 0;
    right: auto;
    text-align: left;
    justify-content: flex-start;
  }

  .promo-card__content--top-center {
    top: 0;
    bottom: auto;
    left: 0;
    right: 0;
    text-align: center;
    justify-content: flex-start;
  }

  .promo-card__content--top-right {
    top: 0;
    bottom: auto;
    left: auto;
    right: 0;
    text-align: right;
    justify-content: flex-start;
  }

  .promo-card__content--center-left {
    top: 50%;
    bottom: auto;
    left: 0;
    right: auto;
    transform: translateY(-50%);
    text-align: left;
    justify-content: center;
  }

  .promo-card__content--center {
    top: 50%;
    bottom: auto;
    left: 0;
    right: 0;
    transform: translateY(-50%);
    text-align: center;
    justify-content: center;
  }

  .promo-card__content--center-right {
    top: 50%;
    bottom: auto;
    left: auto;
    right: 0;
    transform: translateY(-50%);
    text-align: right;
    justify-content: center;
  }

  .promo-card__content--bottom-left {
    bottom: 0;
    top: auto;
    left: 0;
    right: auto;
    text-align: left;
    justify-content: flex-end;
  }

  .promo-card__content--bottom-center {
    bottom: 0;
    top: auto;
    left: 0;
    right: 0;
    text-align: center;
    justify-content: flex-end;
  }

  .promo-card__content--bottom-right {
    bottom: 0;
    top: auto;
    left: auto;
    right: 0;
    text-align: right;
    justify-content: flex-end;
  }

  .promo-card__heading {
    margin: 0 0 16px;
    font-size: 32px;
    line-height: 40px;
    font-weight: normal;
    margin-bottom: 40px;
  }

  .promo-card__subtitle-bold {
    margin: 0;
    font-weight: 600;
    font-size: 16px;
  }

  .promo-card__subtitle-light {
    margin: 0;
    font-weight: 400;
    opacity: 0.5;
    font-size: 16px;
    opacity: 0.8;
  }

  .promo-card__description {
    margin-top: 16px;
    font-size: 14px;
    line-height: 1.5;
    font-weight: 400;
    color: var(--text-color);
  }

  .promo-card__description * {
    color: inherit;
  }

  .promo-card__description p {
    margin: 0 0 8px;
  }

  .promo-card__description p:last-child {
    margin-bottom: 0;
  }

  .promo-card__description h1,
  .promo-card__description h2,
  .promo-card__description h3,
  .promo-card__description h4,
  .promo-card__description h5,
  .promo-card__description h6 {
    margin: 0 0 12px;
    color: inherit;
  }

  /* Mobile adjustments */
  @media screen and (max-width: 749px) {
    .promo-card__image--desktop {
      display: none;
    }

    .promo-card__image--mobile {
      display: block;
    }

    .promo-card__content {
      padding: 30px 20px;
    }

    /* Adjust positioning for mobile */
    .promo-card__content--top-left,
    .promo-card__content--center-left,
    .promo-card__content--bottom-left {
      left: 0;
      right: 0;
    }

    .promo-card__content--top-right,
    .promo-card__content--center-right,
    .promo-card__content--bottom-right {
      left: 0;
      right: 0;
    }

    .promo-card {
      height: 150vw;
    }
    
    .promo-card__heading {
      font-size: 24px;
      font-weight: 300;
      line-height: 32px;
      margin-bottom: 38px;
    }
    
    .promo-card__subtitle-bold,
    .promo-card__subtitle-light {
      font-size: 10px;
    }

    .promo-card__description {
      margin-top: 12px;
      font-size: 12px;
    }
  }
</style>


<div class="promo-card-wrapper">
  <div class="promo-card{% if class %} {{ class }}{% endif %}" style="--overlay-opacity: {{ block.settings.image_overlay_opacity | divided_by: 100.0 }}; --text-color: {{ block.settings.text_color }};">
  {%- if block.settings.video != blank -%}
    {{ block.settings.video | video_tag: class: 'promo-card__image', autoplay: true, loop: true, muted: true, controls: false }}
  {%- elsif block.settings.image != blank or block.settings.mobile_image != blank -%}
    {%- if block.settings.mobile_image != blank -%}
      {{ block.settings.mobile_image | image_url: width: 1000 | image_tag: class: 'promo-card__image promo-card__image--mobile', loading: lazy_load | default: 'lazy' }}
    {%- endif -%}
    {%- if block.settings.image != blank -%}
      {{ block.settings.image | image_url: width: 1000 | image_tag: class: 'promo-card__image promo-card__image--desktop', loading: lazy_load | default: 'lazy' }}
    {%- endif -%}
  {%- else -%}
    <div class="promo-card__placeholder"></div>
  {%- endif -%}
  
  {%- if block.settings.image_overlay_opacity > 0 -%}
    {%- if block.settings.video != blank or block.settings.image != blank -%}
      <div class="promo-card__overlay"></div>
    {%- endif -%}
  {%- endif -%}
  
  {%- assign content_position = block.settings.content_position | default: 'bottom-center' -%}
  <div class="promo-card__content promo-card__content--{{ content_position }}" style="color: {{ block.settings.text_color }};">
    {%- if block.settings.heading != blank -%}
      <h3 class="promo-card__heading" style="color: {{ block.settings.text_color }};">{{ block.settings.heading }}</h3> 
    {%- endif -%}
    {%- if block.settings.subtitle_bold != blank -%}
      <p class="promo-card__subtitle-bold" style="color: {{ block.settings.text_color }};">{{ block.settings.subtitle_bold }}</p>
    {%- endif -%}
    {%- if block.settings.subtitle_light != blank -%}
      <p class="promo-card__subtitle-light" style="color: {{ block.settings.text_color }};">{{ block.settings.subtitle_light }}</p>
    {%- endif -%}
    {%- if block.settings.description != blank -%}
      <div class="promo-card__description">{{ block.settings.description }}</div>
    {%- endif -%}
  </div>
</div>
</div>  