{% comment %}
  Renders a full width promotional card with image/video support
  
  Accepts:
  - block: {Object} Block object with settings
  - lazy_load: {Boolean} Whether to lazy load images. Default: true (optional)
  
  Usage:
  {% render 'full-width-promo-card', block: block %}
{% endcomment %}

{{ 'full-width-promo-card.css' | asset_url | stylesheet_tag }}

<style>
  .full-width-promo-card-wrapper {
    padding-top: {{ block.settings.padding_top_mobile | default: 0 }}px;
    padding-bottom: {{ block.settings.padding_bottom_mobile | default: 0 }}px;
  }

  @media screen and (min-width: 750px) {
    .full-width-promo-card-wrapper {
      padding-top: {{ block.settings.padding_top | default: 0 }}px;
      padding-bottom: {{ block.settings.padding_bottom | default: 0 }}px;
    }
  }
</style>

<div class="full-width-promo-card-wrapper">
<div class="full-width-promo-card{% if block.settings.show_image_only %} full-width-promo-card--image-only{% endif %}{% if is_side_card %} full-width-promo-card--side{% endif %}" style="background-color: {{ block.settings.background_color }}; color: {{ block.settings.text_color }}; --text-color: {{ block.settings.text_color }};{% if block.settings.image_position %} --image-position: {{ block.settings.image_position }};{% endif %}{% if block.settings.show_image_only and block.settings.image_overlay_opacity > 0 %} --image-brightness: {{ 100 | minus: block.settings.image_overlay_opacity | divided_by: 100.0 }};{% endif %}">
  <style>
    @media screen and (min-width: 749px) {
      .full-width-promo-card {
        --section-height: {{ block.settings.section_height }}vw;
      }
    }
  </style>
  <div class="full-width-promo-card__container">
    <div class="full-width-promo-card__image-wrapper">
      {%- if block.settings.video != blank -%}
        {{ block.settings.video | video_tag: class: 'full-width-promo-card__image', autoplay: true, loop: true, muted: true, controls: false }}
      {%- elsif block.settings.image != blank -%}
        {%- if block.settings.mobile_image != blank -%}
          {{ block.settings.image | image_url: width: 800 | image_tag: class: 'full-width-promo-card__image full-width-promo-card__image--desktop', loading: lazy_load | default: 'lazy' }}
          {{ block.settings.mobile_image | image_url: width: 400 | image_tag: class: 'full-width-promo-card__image full-width-promo-card__image--mobile', loading: lazy_load | default: 'lazy' }}
        {%- else -%}
          {{ block.settings.image | image_url: width: 800 | image_tag: class: 'full-width-promo-card__image', loading: lazy_load | default: 'lazy' }}
        {%- endif -%}
      {%- else -%}
        <div style="width: 100%; height: 100%; background: rgba(255,255,255,0.1); display: flex; align-items: center; justify-content: center;">
          <p style="opacity: 0.5;">Image placeholder</p>
        </div>
      {%- endif -%}
    </div>
    
    
      {%- assign mobile_position = block.settings.content_position_mobile | default: 'center' -%}
      {%- assign desktop_position = block.settings.content_position_desktop | default: 'center' -%}
      <div class="full-width-promo-card__content full-width-promo-card__content--mobile-{{ mobile_position }} full-width-promo-card__content--desktop-{{ desktop_position }}">
        <div>
          {%- if block.settings.heading != blank -%}
            <h2 class="full-width-promo-card__heading" style="color: {{ block.settings.text_color }};">{{ block.settings.heading }}</h2>
          {%- endif -%}
          {%- if block.settings.description != blank -%}
            <div class="full-width-promo-card__description">{{ block.settings.description }}</div>
          {%- endif -%}
        </div>
        
        <div class="full-width-promo-card__footer">
          {%- if block.settings.subtitle != blank -%}
            <p class="full-width-promo-card__subtitle" style="color: {{ block.settings.text_color }};">{{ block.settings.subtitle }}</p>
          {%- endif -%}

        
          
          <!-- Debug: link_text = "{{ block.settings.link_text }}", link_url = "{{ block.settings.link_url }}" -->
          {%- if block.settings.link_text != blank  -%}
            <a href="{{ block.settings.link_url }}" class="full-width-promo-card__link" style="color: {{ block.settings.text_color }};">{{ block.settings.link_text }}</a>
          {%- endif -%}
        </div>
      </div>
    
  </div>
</div>
</div> 